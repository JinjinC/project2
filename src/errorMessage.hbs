{{#extend "layout"}}

    {{#replace "sidebar"}}
        {{> sidebar this conditionClass=conditionClass active="errorMessage"}}
    {{/replace}}

    {{#replace "app_content"}}
    
     <div class="row">

         <div class="col-lg-5 col-md-5">
              <h2 class="page-title"><span>错误信息 <small>错误信息界面</small></span></h2>
         </div>

         <div class="col-lg-7 col-md-7">
             {{#block "picker"}}
                 {{> picker }}
             {{/block}}
         </div>
     </div>


		<div class="row">
			<div class="col-lg-12">
				<div class="row">
					<div class="col-lg-12">
						<section class="widget">
                            <header>
                                <h4>
                                    错误率
                                </h4>
                                <div class="widget-controls">
                                    <a data-widgster="expand" title="Expand" href="#"><i class="iconfont icon2 ">&#xe611;</i></a>
                                    <a data-widgster="collapse" title="Collapse" href="#"><i class="iconfont icon2 ">&#xe610;</i></a>
                                </div>
                            </header>
                            <div class="body no-margin">
                               <div id="visits-chart2" class="chart visits-chart">
                                    <svg></svg>
                                </div>
                            </div>
						</section>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12">
						<section class="widget">
                            <div class="body" style="margin-top:0;">
                                <table class="table table-striped table-hover no-margin sources-table">
                                    <thead>
                                    <tr>
                                        <th width="15%" style="text-align: left;" class="sortedth">
                                            <span class="sortedtext">第一次出现时间</span>
                                            <i class="iconfont sortedup" style="display:none">&#xe61a;</i>
                                            <i class="iconfont sorteddown" style="display:none">&#xe619;</i>
                                        </th>
                                        <th width="15%" style="text-align: left;" class="sortedth">
                                            <span class="sortedtext">最后一次出现时间</span>
                                            <i class="iconfont sortedup" style="display:none">&#xe61a;</i>
                                            <i class="iconfont sorteddown" style="display:none">&#xe619;</i>
                                        </th>
                                        <th width="25%" style="text-align: left;" class="sortedth">
                                            <span class="sortedtext">请求地址</span>
                                            <i class="iconfont sortedup" style="display:none">&#xe61a;</i>
                                            <i class="iconfont sorteddown" style="display:none">&#xe619;</i>
                                        </th>
                                        <th width="35%" style="text-align: left;">消息</th>
                                        <th width="10%" style="text-align: left;" class="sortedth">
                                            <span class="sortedtext">出现次数</span>
                                            <i class="iconfont sortedup" style="display:none">&#xe61a;</i>
                                            <i class="iconfont sorteddown" style="display:none">&#xe619;</i>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>2015-02-06 10:40:29</td>
                                        <td>2015-02-06 10:40:29</td>
                                        <td><a href="#" class="request">http-bio-8090-exec-158</a></td>
                                        <td>Request processing failed; nested exception is org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.test.dao.UserDao.getListByName</td>
                                        <td>6</td>
                                    </tr>
                                    <tr>
                                        <td>2015-02-06 10:23:17</td>
                                        <td>2015-02-06 10:50:14</td>
                                        <td><a href="#" class="request">SpringController/getlist.do (GET)</a></td>
                                        <td>Request processing failed; nested exception is org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.test.dao.UserDao.getListByName</td>
                                        <td>69</td>
                                    </tr>
                                    <tr>
                                        <td>2015-01-15 10:41:04</td>
                                        <td>2015-01-15 10:41:18</td>
                                        <td><a href="#" class="request">http-bio-8090-exec-22</a></td>
                                        <td>Request processing failed; nested exception is org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.test.dao.UserDao.getListByName</td>
                                        <td>13</td>
                                    </tr>
                                    <tr>
                                        <td>2015-01-15 10:41:04</td>
                                        <td>2015-01-15 10:41:18</td>
                                        <td><a href="#" class="request">http-bio-8090-exec-146</a></td>
                                        <td>Request processing failed; nested exception is org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.test.dao.UserDao.getListByName</td>
                                        <td>13</td>
                                    </tr>
                                    <tr>
                                        <td>2015-01-15 10:41:04</td>
                                        <td>2015-01-15 10:41:18</td>
                                        <td><a href="#" class="request">http-bio-8090-exec-87</a></td>
                                        <td>Request processing failed; nested exception is org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.test.dao.UserDao.getListByName</td>
                                        <td>12</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

						</section>
					</div>
				</div>
                <div class="row  float-card">
                    <div class="col-md-12">
                    <section class="widget" style="min-height:800px;">
                        <header>
                            <span class="float-card-title">Title</span>
                            <span class="glyphicon glyphicon-remove pull-right"></span>
                        </header>
                        <div class="body">                 
                            <div class="visits-info well well-sm">
                                <div class="row">
                                <div class="col-sm-4  col-xs-6">
                                    <div class="key">服务器</div>
                                    <div id="serve-value" class="value">服务器名</div>
                                </div>
                                    <div class="col-sm-2 col-xs-6">
                                        <div class="key"> 开始时间</div>
                                        <div class="value">2015-02-07 04:42</div>
                                    </div>
                                    <div class="col-sm-2 col-xs-6">
                                        <div class="key">采样周期</div>
                                        <div class="value">2分钟</div>
                                    </div>
                                    <div class="col-sm-2 col-xs-6">
                                        <div class="key">采样次数</div>
                                        <div class="value">120</div>
                                    </div>
                                    <div class="col-sm-2 col-xs-6">
                                        <div class="key">采集人</div>
                                        <div class="value">ONEAPM</div>
                                    </div>
                                </div>
                            </div>
                            <section class="widget" style="margin-top: 20px;min-height: 640px;">
                                <div>
                                    <span style="margin-right: 20px;font-size: 14px">显示设置</span>
                                    <div class="radio">
                                         <input type="radio" name="radio3" id="radio5" value="option1" checked>
                                         <label for="radio5">
                                             web request
                                         </label>
                                     </div>
                                     <div class="radio">
                                         <input type="radio" name="radio3" id="radio6" value="option2">
                                         <label for="radio6">
                                             other
                                         </label>
                                     </div>
                                     <button type="button" class="btn btn-sm btn-refresh " data-placement="top">
                                        <i class="iconfont icon2 refresh">&#xe61c;</i>
                                    </button>
                                </div>
                            </section>
                        </div>
                    </section>
                        
                    </div>
                </div>
			</div>

		</div>
 {{/replace}}

     {{#append "scripts"}}
        <!-- page libs -->
        <script src="lib/slimScroll/jquery.slimscroll.min.js"></script>
        <script src="lib/jquery.sparkline/index.js"></script>

        <script src="lib/backbone/backbone.js"></script>
        <script src="lib/backbone.localStorage/backbone.localStorage-min.js"></script>

        <script src="lib/d3/d3.min.js"></script>
        <script src="lib/nvd3/nv.d3.min.js"></script>


        <script src="lib/form-daterangepicker/daterangepicker.js"></script>                  <!-- Date Range Picker -->
         <!-- DateTime Picker -->
        <script src="lib/form-daterangepicker/moment.min.js"></script> 

        <!-- page application js -->
        <script src="js/daterangepicker.js"></script>
        <script src="js/graph/graph2.js"></script>
        <script>
            $('th').click(function(e){
                var a = $(this).find('.sortedup');
                var b = $(this).find('.sorteddown');

                if (a.css('display') == 'none' && b.css('display') == 'none') {
                    a.show();
                }else{
                    if (a.css('display') != 'none') {
                        a.hide();
                        b.show();
                    }else{
                        if (a.css('display') == 'none') {
                            b.hide();
                        }
                    }
                }
                e.stopPropagation();
            });

            $(document).ready(function  () {

                $('.request').click(function  () {
                    $('.float-card').show().addClass("animated fadeInRightBig");

                    
                    setTimeout(function (){
                                             $('.float-card').removeClass("animated fadeInRightBig");
                                         },500);

                    $('#serve-value').text($(this).text());
                });

                $('.float-card .glyphicon-remove').click(function  () {
                    $('.float-card').hide();
                });
            });
        </script>        
    {{/append}}

{{/extend}}