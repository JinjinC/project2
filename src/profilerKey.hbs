{{#extend "layoutKey"}}

	{{#replace "sidebarKey"}}
        {{> sidebarKey this conditionClass=conditionClass active="profilerKey"}}
    {{/replace}}

    {{#replace "app_content"}}
    <div class="row">
        <div class="col-lg-12">
            <h2 class="page-title">
            <span>性能剖析<small>关键事务性能消耗热点和性能剖析</small></span>
                <a href="#">
                    <button  class="btn btn-success btn-sm btn-hollow" data-placement="middle" data-toggle="modal" data-target="#myModal">
                        创建性能剖析
                    </button>
                </a>
            </h2>
        </div>
    </div>
    {{!--创建性能剖析modal --}}
    <div id="myModal" class="modal fade trans-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="myModalLabel">创建性能剖析</h4>
                </div>
                <div class="modal-body">
                   <div class="row">
                       <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                           <form class="form-horizontal form-label-left">
                               <div class="form-group">
                                    <div class="col-sm-4 col-lg-4 col-md-4">
                                        <label for="app" class="control-label">agent</label>
                                    </div>
                                    <div class="col-sm-8 col-lg-8 col-md-8">
                                        <select required="required" class="select1 form-control form-input-white" name="app">
                                            <option value="">app1</option>
                                            <option value="">app2</option>
                                            <option value="">app3</option>
                                            <option value="">app4</option>
                                        </select>
                                    </div>                                           
                               </div>
                               <div class="form-group">
                                    <div class="col-sm-4 col-lg-4 col-md-4">
                                        <label for="profiler-name" class="control-label">名称</label>
                                    </div>
                                    <div class="col-sm-8 col-lg-8 col-md-8">
                                        <input id="profiler-name" class="form-control form-input-white" required="required" type="text" value="" name="trans-name" data-parsley-trigger="change">
                                        <p class="validation-message" id="trans-error">该项不能为空</p>
                                    </div>                                         
                               </div>
                               <div class="form-group">
                                    <div class="col-sm-4 col-lg-4 col-md-4">
                                        <label for="term" class="control-label">采样周期(ms)</label>
                                    </div>
                                    <div class="col-sm-8 col-lg-8 col-md-8">
                                        <input id="term" class="form-control form-input-white" required="required" type="text" value="" name="apdex" data-parsley-trigger="change">
                                        <p class="validation-message" id="apdexT-error">该项不能为空</p>
                                    </div>                                         
                               </div>
                               <div class="form-group">
                                    <div class="col-sm-4 col-lg-4 col-md-4">
                                        <label for="follow" class="control-label">最大跟踪数</label>
                                    </div>
                                    <div class="col-sm-8 col-lg-8 col-md-8">
                                        <input id="follow" class="form-control form-input-white" required="required" type="text" value="" name="apdex" data-parsley-trigger="change">
                                        <p class="validation-message" id="follow-error">该项不能为空</p>
                                    </div>                                         
                               </div>
                               <div class="form-group">
                                    <div class="col-sm-4 col-lg-4 col-md-4">
                                        <label for="apdex" class="control-label">持续时间(分钟)</label>
                                    </div>
                                    <div class="col-sm-8 col-lg-8 col-md-8">
                                        <input id="timesus" class="form-control form-input-white" required="required" type="text" value="" name="apdex" data-parsley-trigger="change">
                                        <p class="validation-message" id="timesus-error">该项不能为空</p>
                                    </div>                                         
                               </div>
                           </form>
                       </div>
                       <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                            <p>什么是性能剖析？</p>
                            <p> </p>
                            <p>性能剖析能够为关键事务提供更多细节信息。启动性能剖析，TPM 就能够收集到你事务的100个事务足迹和一个线程监控。 通过仔细研究事务足迹和线程分析，我们可以更好地确定在关键性事务内部发生了什么。</p>
                       </div>
                   </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" id="btn-trans-close">取消</button>
                    <button type="button" class="btn btn-success" id="btn-trans">保存</button>
                </div>
            </div>
        </div>
    </div>
     
    <div class="row">
        <div class="col-lg-12">
            <section class="widget">
                <header>
                    <h4>
                        性能剖析
                    </h4>
                </header>
                <div class="body">
                    <table class="table table-striped table-hover no-margin sources-table">
                        <thead>
                            <tr>
                                <th style="text-align:left;">名称</th>
                                <th style="text-align:left;">进程</th>
                                <th style="text-align:left;">Traces 采集数</th>
                                <th style="text-align:left;">开始时间</th>
                                <th style="text-align:left;">状态</th>
                                <th width="3%" style="text-align:left;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="padding: 0 8px;">
                                <td><a href="profilerDetailKey.html">test</a></td>
                                <td>1</td>
                                <td>0</td>
                                <td>2015-01-30 10:33</td>
                                <td>结束</td>
                                <td style="padding: 0 8px;">
                                    <div class="body no-margin">
                                        <button type="button" class="btn btn-trash" data-toggle="modal" data-target="#myModalDel"> 
                                            <i class="iconfont icon2 trash" style="display:none">&#xe61f;</i>
                                        </button>
                                    </div>                               
                                </td>
                            </tr>
                            <tr style="padding: 0 8px;">
                                <td><a href="profilerDetailKey.html">test1</a></td>
                                <td>1</td>
                                <td>0</td>
                                <td>2015-01-30 10:33</td>
                                <td>结束</td>
                                <td style="padding: 0 8px;">
                                    <div class="body no-margin">
                                        <button type="button" class="btn btn-trash" data-toggle="modal" data-target="#myModalDel"> 
                                            <i class="iconfont icon2 trash" style="display:none">&#xe61f;</i>
                                        </button>
                                    </div>                               
                                </td>
                            </tr>
                            <tr style="padding: 0 8px;">
                                <td><a href="profilerDetailKey.html">test2</a></td>
                                <td>1</td>
                                <td>0</td>
                                <td>2015-01-30 10:33</td>
                                <td>结束</td>
                                <td style="padding: 0 8px;">
                                    <div class="body no-margin">
                                        <button type="button" class="btn btn-trash" data-toggle="modal" data-target="#myModalDel"> 
                                            <i class="iconfont icon2 trash" style="display:none">&#xe61f;</i>
                                        </button>
                                    </div>                               
                                </td>
                            </tr>
                            <tr style="padding: 0 8px;">
                                <td><a href="#">test2</a></td>
                                <td>1</td>
                                <td>0</td>
                                <td>2015-01-30 10:33</td>
                                <td>结束</td>
                                <td style="padding: 0 8px;">
                                    <div class="body no-margin">
                                        <button type="button" class="btn btn-trash" data-toggle="modal" data-target="#myModalDel"> 
                                            <i class="iconfont icon2 trash" style="display:none">&#xe61f;</i>
                                        </button>
                                    </div>                               
                                </td>
                            </tr>
                            <tr style="padding: 0 8px;">
                                <td><a href="#">test2</a></td>
                                <td>1</td>
                                <td>0</td>
                                <td>2015-01-30 10:33</td>
                                <td>结束</td>
                                <td style="padding: 0 8px;">
                                    <div class="body no-margin">
                                        <button type="button" class="btn btn-trash" data-toggle="modal" data-target="#myModalDel"> 
                                            <i class="iconfont icon2 trash" style="display:none">&#xe61f;</i>
                                        </button>
                                    </div>                               
                                </td>
                            </tr>
                            <tr style="padding: 0 8px;">
                                <td><a href="#">test2</a></td>
                                <td>1</td>
                                <td>0</td>
                                <td>2015-01-30 10:33</td>
                                <td>结束</td>
                                <td style="padding: 0 8px;">
                                    <div class="body no-margin">
                                        <button type="button" class="btn btn-trash" data-toggle="modal" data-target="#myModalDel"> 
                                            <i class="iconfont icon2 trash" style="display:none">&#xe61f;</i>
                                        </button>
                                    </div>                               
                                </td>
                            </tr>
                            <tr style="padding: 0 8px;">
                                <td><a href="#">test2</a></td>
                                <td>1</td>
                                <td>0</td>
                                <td>2015-01-30 10:33</td>
                                <td>结束</td>
                                <td style="padding: 0 8px;">
                                    <div class="body no-margin">
                                        <button type="button" class="btn btn-trash" data-toggle="modal" data-target="#myModalDel"> 
                                            <i class="iconfont icon2 trash" style="display:none">&#xe61f;</i>
                                        </button>
                                    </div>                               
                                </td>
                            </tr>
                            <tr style="padding: 0 8px;">
                                <td><a href="#">test2</a></td>
                                <td>1</td>
                                <td>0</td>
                                <td>2015-01-30 10:33</td>
                                <td>结束</td>
                                <td style="padding: 0 8px;">
                                    <div class="body no-margin">
                                        <button type="button" class="btn btn-trash" data-toggle="modal" data-target="#myModalDel"> 
                                            <i class="iconfont icon2 trash" style="display:none">&#xe61f;</i>
                                        </button>
                                    </div>                               
                                </td>
                            </tr>
                            <div id="myModalDel" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                                <div class="modal-dialog modal-trash">
                                    <div class="modal-content">

                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                            <h4 class="modal-title" id="myModalLabel">提示</h4>
                                        </div>
                                        <div class="modal-body" style="padding-top:15px;">
                                            <h4>确定删除吗？</h4>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-danger">确定</button>
                                            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>

    {{/replace}}
     {{#append "scripts"}}
        <script>
            $('tr').mouseover(function(){
                $(this).find('.trash').show();
            })

            $('tr').mouseout(function(){
               $(this).find('.trash').hide();
            })


        </script>
        <!-- page libs -->
        <script src="lib/slimScroll/jquery.slimscroll.min.js"></script>
        <script src="lib/jquery.sparkline/index.js"></script>

        <script src="lib/backbone/backbone.js"></script>
        <script src="lib/backbone.localStorage/backbone.localStorage-min.js"></script>

        <script src="lib/d3/d3.min.js"></script>
        <script src="lib/nvd3/nv.d3.min.js"></script>

         <!-- page libs -->
        <script src="lib/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
        <script src="lib/jquery-autosize/jquery.autosize.min.js"></script>
        <script src="lib/bootstrap3-wysihtml5-bower/dist/bootstrap3-wysihtml5.all.min.js"></script>
        <script src="lib/select2/select2.min.js"></script>
        <script src="lib/switchery/dist/switchery.min.js"></script>
        <script src="lib/moment/moment.js"></script>
        <script src="lib/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
        <script src="lib/mjolnic-bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
        <script src="lib/jquery.maskedinput/jquery.maskedinput.min.js"></script>
        <script src="lib/seiyria-bootstrap-slider/dist/bootstrap-slider.min.js"></script>

         <!-- page application js -->
        <script src="js/forms-elements.js"></script>

        <script>
            $(document).ready(function(){
                $('.server').click(function(){
                    $('.float-card').show().addClass("animated fadeInRightBig");
                    setTimeout(function (){
                        $('.float-card').removeClass("animated fadeInRightBig");
                    },500);

                    $('#serve-value').text($(this).text());
                });

                $('.float-card .glyphicon-remove').click(function  () {
                    $('.float-card').hide();
                });
            });


            //创建性能剖析验证

            $('#btn-trans').click(function  () {
                if ( $('.form-input-white').val()=="" ){
                    $('.validation-message').show();
                }
            });

            $('#btn-trans-close').click(function  () {
                $('#trans-name').removeClass("from-error");
                $('#trans-error').hide();
                $('#apdexT').removeClass("from-error");
                $('#apdexT-error').hide();
                $('#trans-name').val("");
                $('#apdexT').val("");
            });

            $('.form-input-white').focus(function  () {
                $(this).next().removeClass("from-error");
                $(this).next().hide();
            });

        </script>
    {{/append}}

{{/extend}}
